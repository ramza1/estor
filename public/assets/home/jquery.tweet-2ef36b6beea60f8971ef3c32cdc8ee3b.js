!function(t){t.fn.tweet=function(e){function a(t,e){if("string"==typeof t){var a=t;for(var r in e){var n=e[r];a=a.replace(new RegExp("{"+r+"}","g"),null===n?"":n)}return a}return t(e)}function r(e,a){return function(){var r=[];return this.each(function(){r.push(this.replace(e,a))}),t(r)}}function n(t){return Date.parse(t.replace(/^([a-z]{3})( [a-z]{3} \d\d?)(.*)( \d{4})$/i,"$1,$2$4$3"))}function i(t){var e=arguments.length>1?arguments[1]:new Date,a=parseInt((e.getTime()-t)/1e3,10),r="";return r=60>a?a+" seconds ago":120>a?"a minute ago":2700>a?parseInt(a/60,10).toString()+" minutes ago":7200>a?"an hour ago":86400>a?""+parseInt(a/3600,10).toString()+" hours ago":172800>a?"a day ago":parseInt(a/86400,10).toString()+" days ago","about "+r}function s(t){return t.match(/^(@([A-Za-z0-9-_]+)) .*/i)?l.auto_join_text_reply:t.match(c)?l.auto_join_text_url:t.match(/^((\w+ed)|just) .*/im)?l.auto_join_text_ed:t.match(/^(\w*ing) .*/i)?l.auto_join_text_ing:l.auto_join_text_default}function o(t){return"https:"==document.location.protocol?t.replace(/^http:/,"https:"):t}function _(){var t="https:"==document.location.protocol?"https:":"http:",e=null===l.fetch?l.count:l.fetch;if(l.list)return t+"//"+l.twitter_api_url+"/1/"+l.username[0]+"/lists/"+l.list+"/statuses.json?page="+l.page+"&per_page="+e+"&callback=?";if(l.favorites)return t+"//"+l.twitter_api_url+"/favorites/"+l.username[0]+".json?page="+l.page+"&count="+e+"&callback=?";if(null===l.query&&1==l.username.length)return t+"//"+l.twitter_api_url+"/1/statuses/user_timeline.json?screen_name="+l.username[0]+"&count="+e+(l.retweets?"&include_rts=1":"")+"&page="+l.page+"&callback=?";var a=l.query||"from:"+l.username.join(" OR from:");return t+"//"+l.twitter_search_url+"/search.json?&q="+encodeURIComponent(a)+"&rpp="+e+"&page="+l.page+"&callback=?"}function u(e){var r={};return r.item=e,r.source=e.source,r.screen_name=e.from_user||e.user.screen_name,r.avatar_size=l.avatar_size,r.avatar_url=o(e.profile_image_url||e.user.profile_image_url),r.retweet="undefined"!=typeof e.retweeted_status,r.tweet_time=n(e.created_at),r.join_text="auto"==l.join_text?s(e.text):l.join_text,r.tweet_id=e.id_str,r.twitter_base="http://"+l.twitter_url+"/",r.user_url=r.twitter_base+r.screen_name,r.tweet_url=r.user_url+"/status/"+r.tweet_id,r.reply_url=r.twitter_base+"intent/tweet?in_reply_to="+r.tweet_id,r.retweet_url=r.twitter_base+"intent/retweet?tweet_id="+r.tweet_id,r.favorite_url=r.twitter_base+"intent/favorite?tweet_id="+r.tweet_id,r.retweeted_screen_name=r.retweet&&e.retweeted_status.user.screen_name,r.tweet_relative_time=i(r.tweet_time),r.tweet_raw_text=r.retweet?"RT @"+r.retweeted_screen_name+" "+e.retweeted_status.text:e.text,r.tweet_text=t([r.tweet_raw_text]).linkUrl().linkUser().linkHash()[0],r.tweet_text_fancy=t([r.tweet_text]).makeHeart().capAwesome().capEpic()[0],r.user=a('<a class="tweet_user" href="{user_url}">{screen_name}</a>',r),r.join=l.join_text?a(' <span class="tweet_join">{join_text}</span> ',r):" ",r.avatar=r.avatar_size?a('<a class="tweet_avatar" href="{user_url}"><img src="{avatar_url}" height="{avatar_size}" width="{avatar_size}" alt="{screen_name}\'s avatar" title="{screen_name}\'s avatar" border="0"/></a>',r):"",r.time=a('<span class="tweet_time"><a href="{tweet_url}" title="view tweet on twitter">{tweet_relative_time}</a></span>',r),r.text=a('<span class="tweet_text">{tweet_text_fancy}</span>',r),r.reply_action=a('<a class="tweet_action tweet_reply" href="{reply_url}">reply</a>',r),r.retweet_action=a('<a class="tweet_action tweet_retweet" href="{retweet_url}">retweet</a>',r),r.favorite_action=a('<a class="tweet_action tweet_favorite" href="{favorite_url}">favorite</a>',r),r}var l=t.extend({username:null,list:null,favorites:!1,query:null,avatar_size:null,count:2,fetch:null,page:1,retweets:!0,intro_text:null,outro_text:null,join_text:null,auto_join_text_default:"i said,",auto_join_text_ed:"i",auto_join_text_ing:"i am",auto_join_text_reply:"i replied to",auto_join_text_url:"i was looking at",loading_text:null,refresh_interval:null,twitter_url:"twitter.com",twitter_api_url:"api.twitter.com",twitter_search_url:"search.twitter.com",template:"{avatar}{join}{text}<br/>{time}",comparator:function(t,e){return e.tweet_time-t.tweet_time},filter:function(){return!0}},e),c=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi;return t.extend({tweet:{t:a}}),t.fn.extend({linkUrl:r(c,function(t){var e=/^[a-z]+:/i.test(t)?t:"http://"+t;return'<a href="'+e+'">'+t+"</a>"}),linkUser:r(/@(\w+)/gi,'@<a href="http://'+l.twitter_url+'/$1">$1</a>'),linkHash:r(/(?:^| )[\#]+([\w\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0600-\u06ff]+)/gi,' <a href="http://'+l.twitter_search_url+"/search?q=&tag=$1&lang=all"+(l.username&&1==l.username.length?"&from="+l.username.join("%2BOR%2B"):"")+'">#$1</a>'),capAwesome:r(/\b(awesome)\b/gi,'<span class="awesome">$1</span>'),capEpic:r(/\b(epic)\b/gi,'<span class="epic">$1</span>'),makeHeart:r(/(&lt;)+[3]/gi,"<tt class='heart'>&#x2665;</tt>")}),this.each(function(e,r){var n=t('<ul class="tweet_list">').appendTo(r),i='<p class="tweet_intro">'+l.intro_text+"</p>",s='<p class="tweet_outro">'+l.outro_text+"</p>",o=t('<p class="loading">'+l.loading_text+"</p>");l.username&&"string"==typeof l.username&&(l.username=[l.username]),l.loading_text&&t(r).append(o),t(r).bind("tweet:load",function(){t.getJSON(_(),function(e){l.loading_text&&o.remove(),l.intro_text&&n.before(i),n.empty();var _=t.map(e.results||e,u);_=t.grep(_,l.filter).sort(l.comparator).slice(0,l.count),n.append(t.map(_,function(t){return"<li>"+a(l.template,t)+"</li>"}).join("")).children("li:first").addClass("tweet_first").end().children("li:odd").addClass("tweet_even").end().children("li:even").addClass("tweet_odd"),l.outro_text&&n.after(s),t(r).trigger("loaded").trigger(0===_.length?"empty":"full"),l.refresh_interval&&window.setTimeout(function(){t(r).trigger("tweet:load")},1e3*l.refresh_interval)})}).trigger("tweet:load")})}}(jQuery);