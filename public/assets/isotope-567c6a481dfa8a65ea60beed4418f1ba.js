!function(t){"use strict";function e(t,e){for(var o in e)t[o]=e[o];return t}function o(t){return"[object Array]"===p.call(t)}function i(t){var e=[];if(o(t))e=t;else if(t&&"number"==typeof t.length)for(var i=0,r=t.length;r>i;i++)e.push(t[i]);else e.push(t);return e}function r(t,e){var o=f(e,t);-1!==o&&e.splice(o,1)}function n(t,o,n,u,p){function f(t,e){return function(o,i){for(var r=0,n=t.length;n>r;r++){var s=t[r],a=o.sortData[s],u=i.sortData[s];if(a>u||u>a){var h=void 0!==e[s]?e[s]:e,p=h?1:-1;return(a>u?1:-1)*p}}return 0}}var l=t.create("isotope",{layoutMode:"masonry",isJQueryFiltering:!0,sortAscending:!0});l.Item=u,l.LayoutMode=p,l.prototype._create=function(){this.itemGUID=0,this._sorters={},this._getSorters(),t.prototype._create.call(this),this.modes={},this.filteredItems=this.items,this.sortHistory=["original-order"];for(var e in p.modes)this._initLayoutMode(e)},l.prototype.reloadItems=function(){this.itemGUID=0,t.prototype.reloadItems.call(this)},l.prototype._itemize=function(){for(var e=t.prototype._itemize.apply(this,arguments),o=0,i=e.length;i>o;o++){var r=e[o];r.id=this.itemGUID++}return this._updateItemsSortData(e),e},l.prototype._initLayoutMode=function(t){var o=p.modes[t],i=this.options[t]||{};this.options[t]=o.options?e(o.options,i):i,this.modes[t]=new o(this)},l.prototype.layout=function(){return!this._isLayoutInited&&this.options.isInitLayout?(this.arrange(),void 0):(this._layout(),void 0)},l.prototype._layout=function(){var t=this._getIsInstant();this._resetLayout(),this._manageStamps(),this.layoutItems(this.filteredItems,t),this._isLayoutInited=!0},l.prototype.arrange=function(t){this.option(t),this._getIsInstant(),this.filteredItems=this._filter(this.items),this._sort(),this._layout()},l.prototype._init=l.prototype.arrange,l.prototype._getIsInstant=function(){var t=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;return this._isInstant=t,t},l.prototype._filter=function(t){function e(){f.reveal(r),f.hide(n)}var o=this.options.filter;o=o||"*";for(var i=[],r=[],n=[],s=this._getFilterTest(o),a=0,u=t.length;u>a;a++){var h=t[a];if(!h.isIgnored){var p=s(h);p&&i.push(h),p&&h.isHidden?r.push(h):p||h.isHidden||n.push(h)}}var f=this;return this._isInstant?this._noTransition(e):e(),i},l.prototype._getFilterTest=function(t){return s&&this.options.isJQueryFiltering?function(e){return s(e.element).is(t)}:"function"==typeof t?function(e){return t(e.element)}:function(e){return n(e.element,t)}},l.prototype.updateSortData=function(t){this._getSorters(),t=i(t);var e=this.getItems(t);e=e.length?e:this.items,this._updateItemsSortData(e)},l.prototype._getSorters=function(){var t=this.options.getSortData;for(var e in t){var o=t[e];this._sorters[e]=y(o)}},l.prototype._updateItemsSortData=function(t){for(var e=0,o=t.length;o>e;e++){var i=t[e];i.updateSortData()}};var y=function(){function t(t){if("string"!=typeof t)return t;var o=a(t).split(" "),i=o[0],r=i.match(/^\[(.+)\]$/),n=r&&r[1],s=e(n,i),u=l.sortDataParsers[o[1]];return t=u?function(t){return t&&u(s(t))}:function(t){return t&&s(t)}}function e(t,e){var o;return o=t?function(e){return e.getAttribute(t)}:function(t){var o=t.querySelector(e);return o&&h(o)}}return t}();l.sortDataParsers={parseInt:function(t){return parseInt(t,10)},parseFloat:function(t){return parseFloat(t)}},l.prototype._sort=function(){var t=this.options.sortBy;if(t){var e=[].concat.apply(t,this.sortHistory),o=f(e,this.options.sortAscending);this.filteredItems.sort(o),t!==this.sortHistory[0]&&this.sortHistory.unshift(t)}},l.prototype._mode=function(){var t=this.options.layoutMode,e=this.modes[t];if(!e)throw new Error("No layout mode: "+t);return e.options=this.options[t],e},l.prototype._resetLayout=function(){t.prototype._resetLayout.call(this),this._mode()._resetLayout()},l.prototype._getItemLayoutPosition=function(t){return this._mode()._getItemLayoutPosition(t)},l.prototype._manageStamp=function(t){this._mode()._manageStamp(t)},l.prototype._getContainerSize=function(){return this._mode()._getContainerSize()},l.prototype.needsResizeLayout=function(){return this._mode().needsResizeLayout()},l.prototype.appended=function(t){var e=this.addItems(t);if(e.length){var o=this._filterRevealAdded(e);this.filteredItems=this.filteredItems.concat(o)}},l.prototype.prepended=function(t){var e=this._itemize(t);if(e.length){var o=this.items.slice(0);this.items=e.concat(o),this._resetLayout(),this._manageStamps();var i=this._filterRevealAdded(e);this.layoutItems(o),this.filteredItems=i.concat(this.filteredItems)}},l.prototype._filterRevealAdded=function(t){var e=this._noTransition(function(){return this._filter(t)});return this.layoutItems(e,!0),this.reveal(e),t},l.prototype.insert=function(t){var e=this.addItems(t);if(e.length){var o,i,r=e.length;for(o=0;r>o;o++)i=e[o],this.element.appendChild(i.element);var n=this._filter(e);for(this._noTransition(function(){this.hide(n)}),o=0;r>o;o++)e[o].isLayoutInstant=!0;for(this.arrange(),o=0;r>o;o++)delete e[o].isLayoutInstant;this.reveal(n)}};var c=l.prototype.remove;return l.prototype.remove=function(t){t=i(t);var e=this.getItems(t);if(c.call(this,t),e&&e.length)for(var o=0,n=e.length;n>o;o++){var s=e[o];r(s,this.filteredItems)}},l.prototype.shuffle=function(){for(var t=0,e=this.items.length;e>t;t++){var o=this.items[t];o.sortData.random=Math.random()}this.options.sortBy="random",this._sort(),this._layout()},l.prototype._noTransition=function(t){var e=this.options.transitionDuration;this.options.transitionDuration=0;var o=t.call(this);return this.options.transitionDuration=e,o},l}var s=t.jQuery,a=String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^\s+|\s+$/g,"")},u=document.documentElement,h=u.textContent?function(t){return t.textContent}:function(t){return t.innerText},p=Object.prototype.toString,f=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var o=0,i=t.length;i>o;o++)if(t[o]===e)return o;return-1};"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size","matches-selector/matches-selector","./item","./layout-mode","./layout-modes/masonry","./layout-modes/fit-rows","./layout-modes/vertical"],n):t.Isotope=n(t.Outlayer,t.getSize,t.matchesSelector,t.Isotope.Item,t.Isotope.LayoutMode)}(window);