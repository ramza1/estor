!function(t){"use strict";function i(t){return new RegExp("(^|\\s+)"+t+"(\\s+|$)")}function e(t,i,e){if(-1===e.indexOf("%"))return e;var s,n=t.style,o=n.width;return n.width=e,s=i.width,n.width=o,s}function s(t,i,s){var n,o,h="height"!==i,l=h?t.offsetWidth:t.offsetHeight,r=h?"Left":"Top",a=h?"Right":"Bottom",c=f(t),u=parseFloat(c["padding"+r])||0,d=parseFloat(c["padding"+a])||0,p=parseFloat(c["border"+r+"Width"])||0,m=parseFloat(c["border"+a+"Width"])||0,g=c["margin"+r],v=c["margin"+a];return y||(g=e(t,c,g),v=e(t,c,v)),n=parseFloat(g)||0,o=parseFloat(v)||0,l>0?s?l+=n+o:l-=u+d+p+m:(l=c[i],(0>l||null===l)&&(l=t.style[i]||0),l=parseFloat(l)||0,s&&(l+=u+d+n+o+p+m)),l}function n(i,e,s){i.addEventListener?i.addEventListener(e,s,!1):i.attachEvent&&(i["e"+e+s]=s,i[e+s]=function(){i["e"+e+s](t.event)},i.attachEvent("on"+e,i[e+s]))}function o(t,i,e){t.removeEventListener?t.removeEventListener(i,e,!1):t.detachEvent&&(t.detachEvent("on"+i,t[i+e]),t[i+e]=null,t["e"+i+e]=null)}function h(t,i){if(t){this.element=t,this.options={};for(var e in h.defaults)this.options[e]=h.defaults[e];for(e in i)this.options[e]=i[e];this._create(),this.build()}}var l=t.document,r="classList"in l.createElement("div"),a=r?function(t,i){return t.classList.contains(i)}:function(t,e){return i(e).test(t.className)},c=r?function(t,i){t.classList.add(i)}:function(t,i){a(t,i)||(t.className=t.className+" "+i)},u=r?function(t,i){t.classList.remove(i)}:function(t,e){t.className=t.className.replace(i(e)," ")},d=l.defaultView,f=d&&d.getComputedStyle?function(t){return d.getComputedStyle(t,null)}:function(t){return t.currentStyle},p=l.getElementsByTagName("body")[0],m=l.createElement("div"),g=p||l.createElement("body");m.style.marginTop="1%",g.appendChild(m);var y="1%"!==f(m).marginTop;g.removeChild(m);var v=["position","height"];h.defaults={isResizable:!0,gutterWidth:0,isRTL:!1,isFitWidth:!1},h.prototype={_getBricks:function(t){for(var i,e=0,s=t.length;s>e;e++)i=t[e],i.style.position="absolute",c(i,"masonry-brick"),this.bricks.push(i)},_create:function(){this.reloadItems();var i=this.element.style;this._originalStyle={};for(var e=0,s=v.length;s>e;e++){var o=v[e];this._originalStyle[o]=i[o]||""}this.element.style.position="relative",this.horizontalDirection=this.options.isRTL?"right":"left",this.offset={};var h=f(this.element),l=this.options.isRTL?"paddingRight":"paddingLeft";this.offset.y=parseFloat(h.paddingTop)||0,this.offset.x=parseFloat(h[l])||0,this.isFluid=this.options.columnWidth&&"function"==typeof this.options.columnWidth;var r=this;setTimeout(function(){c(r.element,"masonry")}),this.options.isResizable&&n(t,"resize",function(){r._handleResize()})},build:function(t){this._getColumns(),this._reLayout(t)},_getColumns:function(){var t=this.options.isFitWidth?this.element.parentNode:this.element,i=s(t,"width");this.columnWidth=this.isFluid?this.options.columnWidth(i):this.options.columnWidth||s(this.bricks[0],"width",!0)||i,this.columnWidth+=this.options.gutterWidth,this.cols=Math.floor((i+this.options.gutterWidth)/this.columnWidth),this.cols=Math.max(this.cols,1)},reloadItems:function(){this.bricks=[],this._getBricks(this.element.children)},_reLayout:function(t){var i=this.cols;for(this.colYs=[];i--;)this.colYs.push(0);this.layout(this.bricks,t)},layout:function(t,i){if(t&&t.length){for(var e,n,o,h,l,r,a=0,c=t.length;c>a;a++)if(e=t[a],1===e.nodeType){if(n=Math.ceil(s(e,"width",!0)/this.columnWidth),n=Math.min(n,this.cols),1===n)r=this.colYs;else for(o=this.cols+1-n,r=[],l=0;o>l;l++)h=this.colYs.slice(l,l+n),r[l]=Math.max.apply(Math,h);for(var u=Math.min.apply(Math,r),d=0,f=r.length;f>d&&r[d]!==u;d++);e.style.top=u+this.offset.y+"px",e.style[this.horizontalDirection]=this.columnWidth*d+this.offset.x+"px";var p=u+s(e,"height",!0),m=this.cols+1-f;for(l=0;m>l;l++)this.colYs[d+l]=p}if(this.element.style.height=Math.max.apply(Math,this.colYs)+"px",this.options.isFitWidth){var g=0;for(a=this.cols;--a&&0===this.colYs[a];)g++;this.element.style.width=(this.cols-g)*this.columnWidth-this.options.gutterWidth+"px"}i&&i.call(t)}},_handleResize:function(){function t(){i.resize(),i._resizeTimeout=null}var i=this;this._resizeTimeout&&clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout(t,100)},resize:function(){var t=this.cols;this._getColumns(),(this.isFluid||this.cols!==t)&&this._reLayout()},reload:function(t){this.reloadItems(),this.build(t)},appended:function(t,i,e){var n=this,o=function(){n._appended(t,e)};if(i){for(var h=s(this.element,"height")+"px",l=0,r=t.length;r>l;l++)t[l].style.top=h;setTimeout(o,1)}else o()},_appended:function(t,i){this._getBricks(t),this.layout(t,i)},destroy:function(){for(var i,e=0,s=this.bricks.length;s>e;e++)i=this.bricks[e],i.style.position="",i.style.top="",i.style.left="",u(i,"masonry-brick");var n=this.element.style;for(s=v.length,e=0;s>e;e++){var h=v[e];n[h]=this._originalStyle[h]}u(this.element,"masonry"),this.resizeHandler&&o(t,"resize",this.resizeHandler)}},h.getWH=s,t.Masonry=h}(window);